(function(t){function e(e){for(var s,c,n=e[0],l=e[1],o=e[2],u=0,h=[];u<n.length;u++)c=n[u],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&h.push(i[c][0]),i[c]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);p&&p(e);while(h.length)h.shift()();return a.push.apply(a,o||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],s=!0,n=1;n<r.length;n++){var l=r[n];0!==i[l]&&(s=!1)}s&&(a.splice(e--,1),t=c(c.s=r[0]))}return t}var s={},i={app:0},a=[];function c(e){if(s[e])return s[e].exports;var r=s[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=t,c.c=s,c.d=function(t,e,r){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)c.d(r,s,function(e){return t[e]}.bind(null,s));return r},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var o=0;o<n.length;o++)e(n[o]);var p=l;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var s=r("85ec"),i=r.n(s);i.a},"18a7":function(t,e,r){"use strict";var s=r("e74f"),i=r.n(s);i.a},"56d7":function(t,e,r){"use strict";r.r(e);var s=r("2b0e"),i=r("498a"),a=r("44d4"),c=r("ccac"),n=r("6e5c"),l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app","data-server-rendered":"true"}},[r("router-view")],1)},o=[],p=(r("034f"),r("2877")),u={},h=Object(p["a"])(u,l,o,!1,null,null,null),f=h.exports,d=(r("f9e3"),r("2dd8"),r("8c4f")),y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-body"},[t._m(0),r("b-container",{staticClass:"nav-and-main-wrapper"},[r("NavPanel"),r("main",{staticClass:"main"},[r("router-view")],1)],1),r("Footer")],1)},v=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"logo"},[s("img",{attrs:{src:r("75a3"),alt:"Лого Гет-Нэт"}})])}],m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-nav",{staticClass:"nav-panel"},[r("b-nav-item",{attrs:{"active-class":"active",to:{name:"Sign"}}},[t._v(" Подписание ")]),r("b-nav-item",{attrs:{"active-class":"active",to:{name:"Verify"}}},[t._v(" Проверка ")]),r("b-nav-item",{attrs:{"active-class":"active",to:{name:"Encrypt"}}},[t._v(" Шифрование ")]),r("b-nav-item",{attrs:{"active-class":"active",to:{name:"Decrypt"}}},[t._v(" Расшифровка ")]),r("div",{staticClass:"spacer"}),r("b-nav-item",{attrs:{"active-class":"active",to:{name:"Plugin"}}},[t._v(" Проверка плагина ")])],1)},b=[],g={},C=g,S=(r("cd4f"),Object(p["a"])(C,m,b,!1,null,null,null)),_=S.exports,w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{staticClass:"fixed-bottom",attrs:{fluid:""}},[r("div",{staticClass:"row"},[r("ul",{staticClass:"col links"},[r("li",[r("a",{attrs:{href:""}},[t._v("ЭДО")])]),r("li",[r("a",{attrs:{href:""}},[t._v("Помощь")])]),r("li",[r("a",{attrs:{href:""}},[t._v('ООО "Гет-Нэт"')])])]),r("ul",{staticClass:"col contacts"},[r("li",[t._v("Адрес: г. Пермь, ул. Пермская, д. 56, оф. 206")]),r("li",[t._v("Почта: support@get-net.ru")]),r("li",[t._v("+7 342 299-66-99")])]),r("ul",{staticClass:"copyright col"},[r("li",[t._v('ООО "ГЕТ-НЭТ"')]),r("li",[t._v("© Get-Net")])])])])},O=[],k={name:"Footer"},F=k,$=(r("893b"),Object(p["a"])(F,w,O,!1,null,"5c840dc7",null)),j=$.exports,L={components:{Footer:j,NavPanel:_}},P=L,E=(r("18a7"),Object(p["a"])(P,y,v,!1,null,null,null)),T=E.exports,x=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",[r("div",{staticClass:"verify-wrapper card"},[r("h4",[t._v("Проверка сертификата")]),r("form",[r("input",{staticClass:"custom-file-picker-real",attrs:{type:"file",id:"file-picker-signature"},on:{input:t.setVerifySign}}),r("label",{staticClass:"custom-file-picker-fake",attrs:{for:"file-picker-signature"}},[t._v(" "+t._s(t.verifySignLabel)+" ")]),r("input",{staticClass:"custom-file-picker-real",attrs:{type:"file",id:"file-picker-file"},on:{input:t.setVerifyFile}}),r("label",{staticClass:"custom-file-picker-fake",attrs:{for:"file-picker-file"}},[t._v(" "+t._s(t.verifyFileLabel)+" ")]),r("button",{staticClass:"form-button",attrs:{type:"button",disabled:!t.verifySign||!t.verifySign},on:{click:t.verifyDoc}},[t._v(" Проверить файл ")]),t.errors?r("div",{staticClass:"alert-warning"},t._l(t.errors,(function(e){return r("span",{key:e},[t._v(t._s(e))])})),0):t._e()]),r("p",[t._v(" Стратегическое планирование имитирует CTR. Комплекс агрессивности, следовательно, органичен. Рекламный бриф масштабирует незначительный метод кластерного анализа. Эти слова совершенно справедливы, однако позиционирование на рынке синхронизирует инвариант. ")]),r("p",[t._v(" Психологическая среда, анализируя результаты рекламной кампании, обуславливает рейтинг. Флегматик, отбрасывая подробности, выстраивает миракль, не считаясь с затратами. Промоакция иллюстрирует продвигаемый имидж предприятия. Метод изучения рынка охватывает глубокий продуктовый ассортимент. Онтогенез, отбрасывая подробности, экономит реализм, именно об этом комплексе движущих сил писал З.Фрейд в теории сублимации. ")])]),r("p",{staticClass:"under-card"},[t._v(" Стратегическое планирование имитирует CTR. Комплекс агрессивности, следовательно, органичен. Рекламный бриф масштабирует незначительный метод кластерного анализа. Эти слова совершенно справедливы, однако позиционирование на рынке синхронизирует инвариант. ")]),r("p",{staticClass:"under-card"},[t._v(" Психологическая среда, анализируя результаты рекламной кампании, обуславливает рейтинг. Флегматик, отбрасывая подробности, выстраивает миракль, не считаясь с затратами. Промоакция иллюстрирует продвигаемый имидж предприятия. Метод изучения рынка охватывает глубокий продуктовый ассортимент. Онтогенез, отбрасывая подробности, экономит реализм, именно об этом комплексе движущих сил писал З.Фрейд в теории сублимации. ")])])},A=[],D=r("fb07"),V={name:"Verify",data(){return{pluginInfo:null,verifyFile:null,verifySign:null,sign:"",valid:!1,verifySignLabel:"Выбрать файл c подписью",verifyFileLabel:"Выбрать файл c для проверки",errors:[]}},computed:{isValidSystemSetup(){return this.$store.state.crypto.isValidSystemSetup},certificates(){return this.$store.state.crypto.certs},signCerts(){return this.$store.state.crypto.certs.filter(t=>t.hasPrivateKey)},cert(){return this.$store.state.crypto.cert},progress(){return this.$store.state.crypto.progress},cades(){return window.cadesplugin}},mounted(){this.$store.dispatch("crypto/init").then(()=>{}).catch(t=>this.addError(t.message)),Object(D["getSystemInfo"])().then(t=>{this.pluginInfo=t}).catch(()=>{this.addError("Для работу с сервисом необходимо установить плагин")})},methods:{setVerifySign(t){this.verifySign=t.target.files[0],this.verifySignLabel=this.verifySign.name},setVerifyFile(t){this.verifyFile=t.target.files[0],this.verifyFileLabel=this.verifyFile.name},addError(t){this.errors.push(t)},async verifyDoc(){if(this.verifyFile&&this.verifySign){this.valid=!1,this.$store.commit("crypto/setProgress",0);let t=await this.$store.dispatch("crypto/verifySign",{file:this.verifyFile,sign:this.verifySign});this.valid=!0===t,this.valid?this.addError("Подпись подтверждена"):this.addError("Подпись не подтверждена")}else this.addError("Выберите подпись и файл для проверки")}}},I=V,R=Object(p["a"])(I,x,A,!1,null,null,null),M=R.exports,B=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",[r("div",{staticClass:"verify-wrapper card"},[r("h4",[t._v("Подписание файла")]),r("form",[r("b-form-select",{staticClass:"custom-select-real",attrs:{options:t.certSelectOptions,id:"sign-select"},on:{change:t.setCert},model:{value:t.certFrom,callback:function(e){t.certFrom=e},expression:"certFrom"}}),r("label",{staticClass:"custom-select-fake",attrs:{for:"sign-select"}},[t._v(" "+t._s(t.certSelectLabel)+" ")]),r("input",{staticClass:"custom-file-picker-real",attrs:{type:"file",id:"file-picker"},on:{input:t.setFile}}),r("label",{staticClass:"custom-file-picker-fake",attrs:{for:"file-picker"}},[t._v(" "+t._s(t.filePickerLabel)+" ")]),r("button",{staticClass:"form-button",attrs:{type:"button",disabled:!t.certFrom||!t.signFile},on:{click:t.signDoc}},[t._v(" Подписать ")]),t.errors?r("div",{staticClass:"alert-warning"},t._l(t.errors,(function(e){return r("span",{key:e},[t._v(t._s(e))])})),0):t._e()],1),r("p",[t._v(" Стратегическое планирование имитирует CTR. Комплекс агрессивности, следовательно, органичен. Рекламный бриф масштабирует незначительный метод кластерного анализа. Эти слова совершенно справедливы, однако позиционирование на рынке синхронизирует инвариант. ")]),r("p",[t._v(" Психологическая среда, анализируя результаты рекламной кампании, обуславливает рейтинг. Флегматик, отбрасывая подробности, выстраивает миракль, не считаясь с затратами. Промоакция иллюстрирует продвигаемый имидж предприятия. Метод изучения рынка охватывает глубокий продуктовый ассортимент. Онтогенез, отбрасывая подробности, экономит реализм, именно об этом комплексе движущих сил писал З.Фрейд в теории сублимации. ")])]),r("p",{staticClass:"under-card"},[t._v(" Стратегическое планирование имитирует CTR. Комплекс агрессивности, следовательно, органичен. Рекламный бриф масштабирует незначительный метод кластерного анализа. Эти слова совершенно справедливы, однако позиционирование на рынке синхронизирует инвариант. ")]),r("p",{staticClass:"under-card"},[t._v(" Психологическая среда, анализируя результаты рекламной кампании, обуславливает рейтинг. Флегматик, отбрасывая подробности, выстраивает миракль, не считаясь с затратами. Промоакция иллюстрирует продвигаемый имидж предприятия. Метод изучения рынка охватывает глубокий продуктовый ассортимент. Онтогенез, отбрасывая подробности, экономит реализм, именно об этом комплексе движущих сил писал З.Фрейд в теории сублимации. ")])])},H=[],U=r("21a6");const N=t=>t.replace(/(^.*?=|")/gm,"").trim(),K=t=>t.map(t=>{let e=t.subjectName.split(",");const r=["CN=","SN=","G=","GN="];let s=e.filter(t=>-1!==r.indexOf(t.trim().slice(0,2))||-1!==r.indexOf(t.trim().slice(0,3))),i=[];s.map(t=>i.push(N(t)));let a=new Date(t.validTo);return a=a.toLocaleDateString("ru-RU"),i.push(" действителен до: "+a),i=i.join(", "),{value:t.thumbprint,text:i}});var z={name:"Sign",data(){return{pluginInfo:null,signFile:null,value:0,certFrom:"",valid:!1,certSelectOptions:null,certSelectLabel:"Выберите сертификат получателя",filePickerLabel:"Выберите файл для подписания",errors:[]}},computed:{isValidSystemSetup(){return this.$store.state.crypto.isValidSystemSetup},certificates(){return this.$store.state.crypto.certs},signCerts(){return this.$store.state.crypto.certs.filter(t=>t.hasPrivateKey)},progress(){return this.$store.state.crypto.progress},cades(){return window.cadesplugin}},methods:{addError(t){this.errors.push(t)},setCertSelectOptions(t){this.certSelectOptions=K(t)},setFile(t){this.signFile=t.target.files[0],this.filePickerLabel=this.signFile.name},setCertSelectLabel(){this.certSelectLabel=this.certSelectOptions.find(t=>this.certFrom===t.value).text},setCert(){this.$store.commit("crypto/useCert",this.certFrom),this.setCertSelectLabel()},async signDoc(){if(this.signFile&&this.certFrom){let t=await this.$store.dispatch("crypto/getHashedData",{file:this.signFile}),e=await Object(D["getCertificate"])(this.certFrom),r=await this.$store.dispatch("crypto/signHash",{cert:e,hashedData:t}),s=new Blob([r],{type:"text/plain;"});Object(U["saveAs"])(s,this.signFile.name+".sgn")}else this.addError("Выберите сертификат и файл для подписи")}},mounted(){this.$store.dispatch("crypto/init").then(()=>{this.signCerts?this.setCertSelectOptions(this.signCerts):this.addError("У Вас нет ни одного сертификата для подписи")}).catch(t=>this.addError(t.message)),Object(D["getSystemInfo"])().then(t=>{this.pluginInfo=t}).catch(()=>{this.addError("Для работы с сервисом необходимо установить плагин")})}},G=z,J=Object(p["a"])(G,B,H,!1,null,null,null),q=J.exports,Q=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",[r("div",{staticClass:"verify-wrapper card"},[r("h4",[t._v("Расшифровка файла")]),r("form",[r("b-form-select",{staticClass:"custom-select-real",attrs:{id:"cert-picker",options:t.certSelectOptions},on:{change:t.setCert},model:{value:t.certTo,callback:function(e){t.certTo=e},expression:"certTo"}}),r("label",{staticClass:"custom-select-fake",attrs:{for:"cert-picker"}},[t._v(" "+t._s(t.certSelectLabel)+" ")]),r("input",{staticClass:"custom-file-picker-real",attrs:{type:"file",id:"file-picker"},on:{input:t.setFile}}),r("label",{staticClass:"custom-file-picker-fake",attrs:{for:"file-picker"}},[t._v(" "+t._s(t.filePickerLabel)+" ")]),r("button",{staticClass:"form-button",attrs:{type:"button",disabled:!t.decryptFile||!t.certTo},on:{click:t.decryptDoc}},[t._v(" Расшифровать файл ")]),t.errors?r("div",{staticClass:"alert-warning"},t._l(t.errors,(function(e){return r("span",{key:e},[t._v(t._s(e)),r("br")])})),0):t._e()],1),r("p",[t._v(" Стратегическое планирование имитирует CTR. Комплекс агрессивности, следовательно, органичен. Рекламный бриф масштабирует незначительный метод кластерного анализа. Эти слова совершенно справедливы, однако позиционирование на рынке синхронизирует инвариант. ")]),r("p",[t._v(" Психологическая среда, анализируя результаты рекламной кампании, обуславливает рейтинг. Флегматик, отбрасывая подробности, выстраивает миракль, не считаясь с затратами. Промоакция иллюстрирует продвигаемый имидж предприятия. Метод изучения рынка охватывает глубокий продуктовый ассортимент. Онтогенез, отбрасывая подробности, экономит реализм, именно об этом комплексе движущих сил писал З.Фрейд в теории сублимации. ")])]),r("p",{staticClass:"under-card"},[t._v(" Стратегическое планирование имитирует CTR. Комплекс агрессивности, следовательно, органичен. Рекламный бриф масштабирует незначительный метод кластерного анализа. Эти слова совершенно справедливы, однако позиционирование на рынке синхронизирует инвариант. ")]),r("p",{staticClass:"under-card"},[t._v(" Психологическая среда, анализируя результаты рекламной кампании, обуславливает рейтинг. Флегматик, отбрасывая подробности, выстраивает миракль, не считаясь с затратами. Промоакция иллюстрирует продвигаемый имидж предприятия. Метод изучения рынка охватывает глубокий продуктовый ассортимент. Онтогенез, отбрасывая подробности, экономит реализм, именно об этом комплексе движущих сил писал З.Фрейд в теории сублимации. ")])])},W=[],X=r("9f1d"),Y=r.n(X),Z={name:"Decrypt",computed:{isValidSystemSetup(){return this.$store.state.crypto.isValidSystemSetup},certificates(){return this.$store.state.crypto.certs},signCerts(){return this.$store.state.crypto.certs.filter(t=>t.hasPrivateKey)},cert(){return this.$store.state.crypto.cert},progress(){return this.$store.state.crypto.progress},cades(){return window.cadesplugin}},data(){return{pluginInfo:null,decryptFile:null,value:0,certTo:"",certSelectOptions:null,certSelectLabel:"Выберите сертификат получателя",filePickerLabel:"Выберите файл для расшифровки",errors:[]}},mounted(){this.$store.dispatch("crypto/init").then(()=>{this.certificates?this.setCertSelectOptions(this.certificates):this.addError("У Вас нет ни одного сертификата")}).catch(t=>this.errors.push(t.message)),Object(D["getSystemInfo"])().then(t=>{this.pluginInfo=t}).catch(()=>{this.addError("Для работы с сервисом необходимо установить плагин")})},methods:{setCertSelectOptions(t){this.certSelectOptions=K(t)},setCertSelectLabel(){this.certSelectLabel=this.certSelectOptions.find(t=>this.certTo===t.value).text},setFile(t){this.decryptFile=t.target.files[0],this.filePickerLabel=this.decryptFile.name},setCert(){this.$store.commit("crypto/useCert",this.certTo),this.setCertSelectLabel()},addError(t){this.errors.push(t)},async decryptDoc(){let t=this.decryptFile,e=await Object(D["getEnvelopedData"])(),r=await e.Recipients;await r.Clear();let s=await Object(D["getCertificate"])(this.certTo);await r.Add(s._cadesCertificate);let i=3145728,a=Math.ceil(t.size/i),c=0;const n=new Y.a(t);let l;do{l=await n.readAsArrayBuffer(i);let t=btoa(new Uint8Array(l).reduce((t,e)=>(t.push(String.fromCharCode(e)),t),[]).join("")),r=c+1>=a,s=await e.StreamDecrypt(t,r),o=Uint8Array.from(atob(s),t=>t.charCodeAt(0)),p=new Blob([o],{type:"text/plain;"});Object(U["saveAs"])(p,this.decryptFile.name),c++}while(c<a)}}},tt=Z,et=Object(p["a"])(tt,Q,W,!1,null,null,null),rt=et.exports,st=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",[r("div",{staticClass:"verify-wrapper card"},[r("h4",[t._v("Шифрование файла")]),r("form",[r("b-form-select",{staticClass:"custom-select-real",attrs:{options:t.certSelectOptions,id:"custom-select"},on:{change:t.setCertSelectLabel},model:{value:t.certTo,callback:function(e){t.certTo=e},expression:"certTo"}}),r("label",{staticClass:"custom-select-fake",attrs:{for:"custom-select"}},[t._v(" "+t._s(t.certSelectLabel)+" ")]),r("input",{staticClass:"custom-file-picker-real",attrs:{type:"file",id:"file-picker"},on:{input:t.setFile}}),r("label",{staticClass:"custom-file-picker-fake",attrs:{for:"file-picker"}},[t._v(" "+t._s(t.filePickerLabel)+" ")]),r("button",{staticClass:"form-button",attrs:{type:"button",disabled:!t.encryptFile||!t.certTo},on:{click:t.encryptDoc}},[t._v(" Зашифровать файл ")]),t.errors?r("div",{staticClass:"alert-warning"},t._l(t.errors,(function(e){return r("span",{key:e},[t._v(t._s(e))])})),0):t._e()],1),r("p",[t._v(" Стратегическое планирование имитирует CTR. Комплекс агрессивности, следовательно, органичен. Рекламный бриф масштабирует незначительный метод кластерного анализа. Эти слова совершенно справедливы, однако позиционирование на рынке синхронизирует инвариант. ")]),r("p",[t._v(" Психологическая среда, анализируя результаты рекламной кампании, обуславливает рейтинг. Флегматик, отбрасывая подробности, выстраивает миракль, не считаясь с затратами. Промоакция иллюстрирует продвигаемый имидж предприятия. Метод изучения рынка охватывает глубокий продуктовый ассортимент. Онтогенез, отбрасывая подробности, экономит реализм, именно об этом комплексе движущих сил писал З.Фрейд в теории сублимации. ")])]),r("p",{staticClass:"under-card"},[t._v(" Стратегическое планирование имитирует CTR. Комплекс агрессивности, следовательно, органичен. Рекламный бриф масштабирует незначительный метод кластерного анализа. Эти слова совершенно справедливы, однако позиционирование на рынке синхронизирует инвариант. ")]),r("p",{staticClass:"under-card"},[t._v(" Психологическая среда, анализируя результаты рекламной кампании, обуславливает рейтинг. Флегматик, отбрасывая подробности, выстраивает миракль, не считаясь с затратами. Промоакция иллюстрирует продвигаемый имидж предприятия. Метод изучения рынка охватывает глубокий продуктовый ассортимент. Онтогенез, отбрасывая подробности, экономит реализм, именно об этом комплексе движущих сил писал З.Фрейд в теории сублимации. ")])])},it=[],at={name:"Encrypt",computed:{isValidSystemSetup(){return this.$store.state.crypto.isValidSystemSetup},certificates(){return this.$store.state.crypto.certs},signCerts(){return this.$store.state.crypto.certs.filter(t=>t.hasPrivateKey)},cert(){return this.$store.state.crypto.cert},progress(){return this.$store.state.crypto.progress},cades(){return window.cadesplugin}},data(){return{pluginInfo:null,encryptFile:null,value:0,certTo:"",certSelectOptions:null,certSelectLabel:"Выберите сертификат получателя",filePickerLabel:"Выберите файл для расшифровки",errors:[]}},mounted(){this.$store.dispatch("crypto/init").then(()=>{this.certificates?this.setCertSelectOptions(this.certificates):this.addError("У Вас нет ни одного сертификата")}).catch(t=>this.addError(t.message)),Object(D["getSystemInfo"])().then(t=>{this.pluginInfo=t}).catch(()=>{this.addError("Для работы с сервисом необходимо установить плагин")})},methods:{addError(t){this.errors.push(t)},setCertSelectOptions(t){this.certSelectOptions=K(t)},setCertSelectLabel(){this.certSelectOptions.length&&(this.certSelectLabel=this.certSelectOptions.find(t=>this.certTo===t.value).text)},setFilePickerLabel(){this.filePickerLabel=this.encryptFile.name},setFile(t){this.encryptFile=t.target.files[0],this.filePickerLabel=this.encryptFile.name},setCert(){this.$store.commit("crypto/useCert",this.certTo),this.setCertSelectLabel()},async encryptDoc(){if(this.encryptFile&&this.certTo){let t=this.encryptFile,e=await Object(D["getEnvelopedData"])(),r=await e.Recipients;await r.Clear();let s=await Object(D["getCertificate"])(this.certTo);await r.Add(s._cadesCertificate);let i=3145728,a=Math.ceil(t.size/i),c=0;const n=new Y.a(t);let l;do{l=await n.readAsArrayBuffer(i);let t=btoa(new Uint8Array(l).reduce((t,e)=>(t.push(String.fromCharCode(e)),t),[]).join("")),r=c+1>=a,s=await e.StreamEncrypt(t,r),o=Uint8Array.from(atob(s),t=>t.charCodeAt(0)),p=new Blob([o],{type:"text/plain;"});Object(U["saveAs"])(p,this.encryptFile.name),this.$store.commit("crypto/setProgress",Math.round(c/a*100)),c++}while(c<a)}else this.addError("Выберите сертификат и файл для расшифровки")}}},ct=at,nt=Object(p["a"])(ct,st,it,!1,null,null,null),lt=nt.exports,ot=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",[r("div",{staticClass:"verify-wrapper card"},[r("h4",[t._v("Проверка плагина")]),r("p",[t._v("Плагин установлен правильно")])]),r("div",{staticClass:"verify-wrapper card"},[r("h4",[t._v("Инструкция по установке плагина")]),r("ol",[r("li",[t._v(" Скачать и установить "),r("br"),t._v(" КриптоПро CSP. ")]),r("li",[t._v(" Скачать и установить КриптоПро "),r("br"),t._v(" ЭЦП Browser plug-in. ")]),r("li",[t._v(" Возможно потребуется включить "),r("br"),t._v(" плагин в браузере. ")])])])])},pt=[],ut={name:"Plugin",computed:{isValidSystemSetup(){return this.$store.state.crypto.isValidSystemSetup},certificates(){return this.$store.state.crypto.certs},signCerts(){return this.$store.state.crypto.certs.filter(t=>t.hasPrivateKey)},cert(){return this.$store.state.crypto.cert},progress(){return this.$store.state.crypto.progress},cades(){return window.cadesplugin}},data(){return{pluginInfo:null,decryptFile:null,value:0,certTo:"",certSelectOptions:null,certSelectLabel:"Выберите сертификат получателя",filePickerLabel:"Выбрать файл для расшифровки",errors:[]}},mounted(){this.$store.dispatch("crypto/init").then(()=>{this.setCertSelectOptions(this.certificates)}),Object(D["getSystemInfo"])().then(t=>this.pluginInfo=t).catch(t=>{console.log(t)})},methods:{setCertSelectOptions(t){this.certSelectOptions=K(t)},setCertSelectLabel(){this.certSelectOptions.length&&(this.certSelectLabel=this.certSelectOptions.find(t=>this.certTo===t.value).text)},setFilePickerLabel(){this.filePickerLabel=this.decryptFile.name},setCert(){this.$store.commit("crypto/useCert",this.certTo),this.setCertSelectLabel()},async decryptDoc(){let t=this.decryptFile,e=await Object(D["getEnvelopedData"])(),r=await e.Recipients;await r.Clear();let s=await Object(D["getCertificate"])(this.certTo);await r.Add(s._cadesCertificate);let i=3145728,a=Math.ceil(t.size/i),c=0;const n=new Y.a(t);let l;do{l=await n.readAsArrayBuffer(i);let t=btoa(new Uint8Array(l).reduce((t,e)=>(t.push(String.fromCharCode(e)),t),[]).join("")),r=c+1>=a,s=await e.StreamDecrypt(t,r),o=Uint8Array.from(atob(s),t=>t.charCodeAt(0)),p=new Blob([o],{type:"text/plain;"});Object(U["saveAs"])(p,this.decryptFile.name),this.$store.commit("crypto/setProgress",Math.round(c/a*100)),c++}while(c<a);this.$store.commit("crypto/setProgress",100)}}},ht=ut,ft=(r("8f58"),Object(p["a"])(ht,ot,pt,!1,null,"25aa3e0e",null)),dt=ft.exports;s["a"].use(d["a"]);const yt=[{path:"/",name:"Layout",component:T,children:[{path:"/verify",name:"Verify",component:M},{path:"/sign",name:"Sign",component:q},{path:"/decrypt",name:"Decrypt",component:rt},{path:"/encrypt",name:"Encrypt",component:lt},{path:"/plugin",name:"Plugin",component:dt},{path:"/*",redirect:q}]},{path:"*",redirect:q}],vt=new d["a"]({mode:"history",base:"/",routes:yt});var mt=vt,bt=r("2f62"),gt={namespaced:!0,state:{certs:[],cert:null,isValidSystemSetup:!1,progress:0,noPlugin:!1},getters:{},mutations:{setCertificates:(t,e)=>s["a"].set(t,"certs",e),setSystemSetup:(t,e)=>s["a"].set(t,"isValidSystemSetup",e),useCert:(t,e)=>{let r=null;t.certs.length&&(r=t.certs.find(t=>t.thumbprint===e)),s["a"].set(t,"cert",r)},setProgress:(t,e)=>s["a"].set(t,"progress",e),setNoPlugin:t=>t.noPlugin=!0},actions:{async init(t){let e=await Object(D["isValidSystemSetup"])();if(e){t.commit("setSystemSetup",e);let r=await Object(D["getUserCertificates"])(!1,!0);return t.commit("setCertificates",r),r}},async getHashedData(t,e){let r=await Object(D["getHashedData"])();if(e.file){let s=e.file,i=3145728,a=Math.ceil(s.size/i),c=0;const n=new Y.a(s);let l;do{l=await n.readAsArrayBuffer(i);let e=btoa(new Uint8Array(l).reduce((t,e)=>(t.push(String.fromCharCode(e)),t),[]).join(""));await r.Hash(e),t.commit("setProgress",Math.round(c/a*100)),c++}while(c<a);t.commit("setProgress",100)}return r},async signHash(t,e){let r=e.hashedData,s=e.cert;if(r&&s)return Object(D["createHashSignature"])(s,r)},async verifySign(t,e){let r=await t.dispatch("getHashedData",{file:e.file});const s=new Y.a(e.sign);let i=await s.readAsText();if(r&&i)return await Object(D["verifyHashSignature"])(r,i)}}};s["a"].use(bt["a"]);const Ct=new bt["a"].Store({modules:{crypto:gt}});var St=Ct;s["a"].config.productionTip=!1,s["a"].use(i["a"]),s["a"].use(a["a"]),s["a"].use(c["a"]),s["a"].use(n["a"]),new s["a"]({router:mt,store:St,render:t=>t(f),mounted:()=>document.dispatchEvent(new Event("x-app-rendered"))}).$mount("#app")},"75a3":function(t,e,r){t.exports=r.p+"img/get-net-logo.3d430239.svg"},"7c37":function(t,e,r){},"85ec":function(t,e,r){},"893b":function(t,e,r){"use strict";var s=r("b4b4"),i=r.n(s);i.a},"8f58":function(t,e,r){"use strict";var s=r("d408"),i=r.n(s);i.a},b4b4:function(t,e,r){},cd4f:function(t,e,r){"use strict";var s=r("7c37"),i=r.n(s);i.a},d408:function(t,e,r){},e74f:function(t,e,r){}});
//# sourceMappingURL=app.2c2dfa46.js.map